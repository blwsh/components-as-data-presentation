import { Head, Notes } from 'mdx-deck'
import { Appear, Image } from '@mdx-deck/components'
import {
  Split
} from '@mdx-deck/layouts'
import { CodeSurferLayout } from "code-surfer"

import Hero from './components/Hero'
import TeaserText from './components/TeaserText'
import TeaserImage from './components/TeaserImage'

import Switcher from './components/Switcher';
import SwitchSteps from './components/SwitchSteps';
import { SwitchRow, SettingsList } from './components/SwitchHelpers';

import PhoneWithContent from './components/PhoneWithContent'
import TabletWithContent from './components/TabletWithContent'
import LaptopWithContent from './components/LaptopWithContent'

import IconGrid from './components/IconGrid'
import DecoupleLine from './components/DecoupleLine'
import Database from './components/Database'
import BusinessLogic from './components/BusinessLogic'
import API from './components/API'
import ABTest from './components/ABTest'
import Render from './components/Render'
import Components from './components/Components'
import DataFetching from './components/DataFetching'
import FeatureFlag from './components/FeatureFlag'

import Center from './components/layout/Center'
import Jumbo from './components/layout/Jumbo'
import SideBySide from './components/layout/SideBySide'
import TopCenter from './components/TopCenter'

import { SlideIn, BlurIn, ZoomSteps } from './components/lib'

export { themes } from './theme'

import './global.css'

<Head>
  <title>Components as Data, by Luke Herrington</title>
</Head>

# Hi! üëãüèª I'm Luke

<img style={{borderRadius: '50%', height: '50%'}} src="https://lukeherrington.com/static/cdf656371789fe7d89f21fc88d7dffb2/fdbb0/luke-square-sm.png" />
<img style={{ width: '15%', position: 'absolute', bottom: '50px', right: '30px'}} src="https://www.fourkitchens.com/wp-content/themes/twentysixteen-4k/img/logos/4k-logo.svg" />

---

<TopCenter><h1>Components as Data</h1></TopCenter>

<Split>
<PhoneWithContent size={2} style={{ zIndex: 1, position: 'absolute', top: '32%', left: '10%' }} />

### A Cross Platform GraphQL Powered Component API

</Split>

---

<Center>
<Split>
<div style={{display: 'grid', gridGap: '0 2em', justifyItems: 'center', alignItems: 'center'}}>
  <Hero style={{width:'10em', height: '5em', gridRow:'1/2', gridColumn:'1/2'}} />
  <Appear>
    <TeaserImage style={{width:'4em', height: '4em', gridRow:'2/3', gridColumn:'1/2' }} />
    <TeaserText style={{width:'10em', height: '3em', gridRow:'3/4', gridColumn:'1/2'}} />
  </Appear>

<h2 style={{gridRow:'1/2', gridColumn:'2/3'}}>Hero</h2>

<Appear>
  <h2 style={{gridRow:'2/3', gridColumn:'2/3'}}>Image</h2>
  <h2 style={{gridRow:'3/4', gridColumn:'2/3'}}>Teaser</h2>
</Appear>

</div>

</Split>
</Center>


---
<TopCenter><h1>Components Win</h1></TopCenter>
<TabletWithContent size={0}  style={{ position: 'absolute', top: '60%', left: '35%', transform: 'translate(-35%, -60%)' }}  />
<LaptopWithContent size={0}  style={{ position: 'absolute', top: '60%', left: '80%', transform: 'translate(-80%, -60%)' }}  />
<PhoneWithContent size={0} style={{ position: 'absolute', top: '70%', left: '50%', transform: 'translate(-50%, -70%)' }} />

---

<Center>
  <Jumbo>
<CodeSurferLayout>

```js
component = render(props + state)
```

</CodeSurferLayout>
  </Jumbo>

</Center>

---

<Split>
<div style={{ margin: '20px'}}>

### Props
Read-only external data

### State
Local data that changes over time

</div>
<div style={{ margin: '20px'}}>

### Render
Declarative representation of UI

</div>
</Split>


---

## Switch

<Center vert={false}>
  <SwitchSteps label="Airplane Mode" />
</Center>


---

## Components Compose

<Center vert={false}>
  <SlideIn>
    <SwitchRow key="1">
      <Switcher label="Airplane Mode" />
    </SwitchRow>
    <Appear>
      <SwitchRow key="2">
        <Switcher label="WiFi" />
      </SwitchRow>
      <SwitchRow key="3">
        <Switcher label="Low Power Mode" />
      </SwitchRow>    
    </Appear>
  </SlideIn>
</Center>


---
<IconGrid>
  <ZoomSteps>
    <Database style={{ gridRow: '2/3', gridColumn: '1/2' }} />
    <BusinessLogic style={{ gridRow: '2/3', gridColumn: '2/3' }} />
    <DataFetching style={{ gridRow: '2/3', gridColumn: '3/4'}} />
    <FeatureFlag style={{ gridRow: '3/4', gridColumn: '4/5' }} />
    <ABTest style={{ gridRow: '1/2', gridColumn: '4/5' }} />
    <Components style={{gridRow: '2/3', gridColumn: '4/5' }} />
    <Render style={{ gridRow: '2/3', gridColumn: '5/6' }} />
  </ZoomSteps>
</IconGrid>


---

<Center >

## Who What When Where Why How

</Center>

---

<Center style={{ fonSize: '1.2em' }}>


<h1 style={{ color: '#4be8ff', }}>
  Where? ü§î
</h1>

</Center>

---

## The Decouple Line

<DecoupleLine steps={['MID_LEFT', 'LEFT', 'RIGHT', 'MID_RIGHT']} />

---

<IconGrid>
    <Database style={{ gridRow: '2/3', gridColumn: '1/2' }} />
    <BusinessLogic style={{ gridRow: '2/3', gridColumn: '2/3' }} />
    <DataFetching style={{ gridRow: '2/3', gridColumn: '3/4'}} />
    <FeatureFlag style={{ gridRow: '3/4', gridColumn: '4/5' }} />
    <ABTest style={{ gridRow: '1/2', gridColumn: '4/5' }} />
    <Components style={{gridRow: '2/3', gridColumn: '4/5' }} />
    <Render style={{ gridRow: '2/3', gridColumn: '5/6' }} />
</IconGrid>
<DecoupleLine steps={['LEFT']} />

---

<Center>
<h1 style={{ color: '#4be8ff', }}>
  REST‚Ñ¢
</h1>
</Center>

---

<IconGrid>
    <Database style={{ gridRow: '2/3', gridColumn: '1/2' }} />
    <BusinessLogic style={{ gridRow: '2/3', gridColumn: '2/3' }} />
    <DataFetching style={{ gridRow: '2/3', gridColumn: '3/4'}} />
    <FeatureFlag style={{ gridRow: '3/4', gridColumn: '4/5' }} />
    <ABTest style={{ gridRow: '1/2', gridColumn: '4/5' }} />
    <Components style={{gridRow: '2/3', gridColumn: '4/5' }} />
    <Render style={{ gridRow: '2/3', gridColumn: '5/6' }} />
</IconGrid>
<DecoupleLine steps={['LEFT', 'MID_LEFT']} />

---

<Center>
<h1 style={{ color: '#4be8ff', }}>
  More than just entities
</h1>
</Center>

---

<Center>
<CodeSurferLayout>

```json 4:5 title="HATEOS in Action" subtitle="If these exist, create the buttons to fetch more data"
{
  "links":{
    "self":"https://api.test.com/list?page[number]=1&page[size]=100",
    "next":"https://api.test.com/list?page[number]=2&page[size]=100",
    "prev":"https://api.test.com/list?page[number]=0&page[size]=100",
    "last":"https://api.test.com/list?page[number]=33&page[size]=100",
    "first":"https://api.test.com/list?page[number]=0&page[size]=100"
  }
}
```

```json 6 subtitle="last is calculated by dividing the total count by the page size"
{
  "links":{
    "self":"https://api.test.com/list?page[number]=1&page[size]=100",
    "next":"https://api.test.com/list?page[number]=2&page[size]=100",
    "prev":"https://api.test.com/list?page[number]=0&page[size]=100",
    "last":"https://api.test.com/list?page[number]=33&page[size]=100",
    "first":"https://api.test.com/list?page[number]=0&page[size]=100"
  }
}
```

```json 3:4 subtitle="If some links don't exist, don't create the respective UI"
{
  "links":{
    "self":"https://api.test.com/list?page[number]=33&page[size]=100",
    "prev":"https://api.test.com/list?page[number]=32&page[size]=100",
    "first":"https://api.test.com/list?page[number]=0&page[size]=100"
  }
}
```

```json 3:5 subtitle="Swapping to an offset or cursor based pager is not leaked to frontends"
{
  "links":{
    "self":"https://api.test.com/list?page[offset]=450&page[limit]=100",
    "prev":"https://api.test.com/list?page[offset]=350&page[limit]=100",
    "first":"https://api.test.com/list?page[offset]=0&page[limit]=100"
  }
}
```

</CodeSurferLayout>
</Center>

---

<IconGrid>
    <Database style={{ gridRow: '2/3', gridColumn: '1/2' }} />
    <BusinessLogic style={{ gridRow: '2/3', gridColumn: '2/3' }} />
    <DataFetching style={{ gridRow: '2/3', gridColumn: '3/4'}} />
    <FeatureFlag style={{ gridRow: '3/4', gridColumn: '4/5' }} />
    <ABTest style={{ gridRow: '1/2', gridColumn: '4/5' }} />
    <Components style={{gridRow: '2/3', gridColumn: '4/5' }} />
    <Render style={{ gridRow: '2/3', gridColumn: '5/6' }} />
</IconGrid>
<DecoupleLine steps={['MID_LEFT', 'FAR_RIGHT']} />

---

<Center>
<h1 style={{ color: '#4be8ff', }}>
  Microservices: Now you have two problems
</h1>
<h3>- (not) Martin Folwer</h3>
</Center>


---

<div style={{ marginLeft: '10%', marginTop: '10%', textAlign: 'left'}}>

### C:onsistency: up-to-date
### A:vailability: response guarenteed
### P:artition tolerance: resilient to network failures

</div>

---

<IconGrid>
    <Database style={{ gridRow: '2/3', gridColumn: '1/2' }} />
    <BusinessLogic style={{ gridRow: '2/3', gridColumn: '2/3' }} />
    <DataFetching style={{ gridRow: '2/3', gridColumn: '3/4'}} />
    <FeatureFlag style={{ gridRow: '3/4', gridColumn: '4/5' }} />
    <ABTest style={{ gridRow: '1/2', gridColumn: '4/5' }} />
    <Components style={{gridRow: '2/3', gridColumn: '4/5' }} />
    <Render style={{ gridRow: '2/3', gridColumn: '5/6' }} />
</IconGrid>
<DecoupleLine steps={['FAR_RIGHT', 'FAR_LEFT']} />

---

<Center>
<h1 style={{ color: '#4be8ff', }}>
  Wait.. What?
</h1>
</Center>

---

<Center>
  /get-off-soapbox
</Center>

---

<IconGrid>
    <Database style={{ gridRow: '2/3', gridColumn: '1/2' }} />
    <BusinessLogic style={{ gridRow: '2/3', gridColumn: '2/3' }} />
    <DataFetching style={{ gridRow: '2/3', gridColumn: '3/4'}} />
    <FeatureFlag style={{ gridRow: '3/4', gridColumn: '4/5' }} />
    <ABTest style={{ gridRow: '1/2', gridColumn: '4/5' }} />
    <Components style={{gridRow: '2/3', gridColumn: '4/5' }} />
    <Render style={{ gridRow: '2/3', gridColumn: '5/6' }} />
</IconGrid>
<DecoupleLine steps={['FAR_LEFT', 'RIGHT']} />

---


<Center>
<CodeSurferLayout>

```json subtitle="Components as Data Example"
{
  "component": "Hero",
  "data": {
    "title": "Welcome!",
    "backgroundImage": "https://via.placeholder.com/700x400",
    "subtitle": "Make yourself at home"
  }
}
```

```json 2 subtitle="Components as Data Example"
{
  "component": "Hero",
  "data": {
    "title": "Welcome!",
    "backgroundImage": "https://via.placeholder.com/700x400",
    "subtitle": "Make yourself at home"
  }
}
```

```json 3:7 subtitle="Components as Data Example"
{
  "component": "Hero",
  "data": {
    "title": "Welcome!",
    "backgroundImage": "https://via.placeholder.com/700x400",
    "subtitle": "Make yourself at home"
  }
}
```

</CodeSurferLayout>
</Center>

---

<Center>

<h1 style={{ color: '#4be8ff', }}>
  Drupal 101:
</h1>

## Don't put logic in templates

</Center>

---

<iframe 
  src="https://nbc.com"
  style={{
    padding: '2%',
    width: '100%',
    height: '100%',
  }}
  frameBorder="0"
  title="NBC.com"
>
</iframe>

---

<Center>

### Slideshow
#### Slide
### Shelf
#### SeriesTile

</Center>

---

<Center>

<h1 style={{ color: '#4be8ff', }}>
  Why GraphQL
</h1>
<Appear>
  <h2>Types</h2>
  <h2>Queries</h2>
</Appear>

</Center>

---

<Center>
<CodeSurferLayout>

```graphql 1:17
interface Component {
  component: String!
  treatment: String
}

type VideoTile implements Component {
  component: String!
  treatment: String
  data: VideoData
}

type VideoData {
  image: String!
  title: String!
  secondaryTitle: String!
  percentViewed: Float
}

type SeriesTile implements Component {
  component: String!
  treatment: String
  data: SeriesData
}

type SeriesData {
  image: String!
  title: String!
  secondaryTitle: String!
  favoriteId: String
}

union Tile = VideoTile | SeriesTile

type ShelfData {
  title: String
  items: [Tile]
}

interface Section {
  component: String!
  treatment: String
}

type Shelf implements Section & Component {
  component: String!
  treatment: String
  data: ShelfData
}

interface Featured {
  component: String!
  treatment: String
}

type SlideshowData {
  items: [Slide]
}

type Slideshow implements Featured & Component {
  component: String!
  treatment: String
  data: SlideshowData
}

type SlideData {
  image: String!
  title: String!
  secondaryTitle: String
}

type Slide {
  component: String!
  treatment: String
  data: SlideData
}

type Page implements Component {
  id: ID!
  treatment: String
  component: String!
  name: String!
  featured: Featured
  sections: [Section]!
}

enum SupportedPlatforms {
  iOS
  tvOS
  roku
  rokuStick
  samsungTv
  android
  androidTv
  xboxOne
  web
  mobileWeb
  fireTablet
  fireTv
  fireTvStick
  vizio
}

type Query {
  page(
    id: ID
    name: String!
    userId: String!
    platform: SupportedPlatforms!
  ): Page
}
```

```graphql 18:37
interface Component {
  component: String!
  treatment: String
}

type VideoTile implements Component {
  component: String!
  treatment: String
  data: VideoData
}

type VideoData {
  image: String!
  title: String!
  secondaryTitle: String!
  percentViewed: Float
}

type SeriesTile implements Component {
  component: String!
  treatment: String
  data: SeriesData
}

type SeriesData {
  image: String!
  title: String!
  secondaryTitle: String!
  favoriteId: String
}

union Tile = VideoTile | SeriesTile

type ShelfData {
  title: String
  items: [Tile]
}

interface Section {
  component: String!
  treatment: String
}

type Shelf implements Section & Component {
  component: String!
  treatment: String
  data: ShelfData
}

interface Featured {
  component: String!
  treatment: String
}

type SlideshowData {
  items: [Slide]
}

type Slideshow implements Featured & Component {
  component: String!
  treatment: String
  data: SlideshowData
}

type SlideData {
  image: String!
  title: String!
  secondaryTitle: String
}

type Slide {
  component: String!
  treatment: String
  data: SlideData
}

type Page implements Component {
  id: ID!
  treatment: String
  component: String!
  name: String!
  featured: Featured
  sections: [Section]!
}

enum SupportedPlatforms {
  iOS
  tvOS
  roku
  rokuStick
  samsungTv
  android
  androidTv
  xboxOne
  web
  mobileWeb
  fireTablet
  fireTv
  fireTvStick
  vizio
}

type Query {
  page(
    id: ID
    name: String!
    userId: String!
    platform: SupportedPlatforms!
  ): Page
}
```

```graphql 34:48
interface Component {
  component: String!
  treatment: String
}

type VideoTile implements Component {
  component: String!
  treatment: String
  data: VideoData
}

type VideoData {
  image: String!
  title: String!
  secondaryTitle: String!
  percentViewed: Float
}

type SeriesTile implements Component {
  component: String!
  treatment: String
  data: SeriesData
}

type SeriesData {
  image: String!
  title: String!
  secondaryTitle: String!
  favoriteId: String
}

union Tile = VideoTile | SeriesTile

type ShelfData {
  title: String
  items: [Tile]
}

interface Section {
  component: String!
  treatment: String
}

type Shelf implements Section & Component {
  component: String!
  treatment: String
  data: ShelfData
}

interface Featured {
  component: String!
  treatment: String
}

type SlideshowData {
  items: [Slide]
}

type Slideshow implements Featured & Component {
  component: String!
  treatment: String
  data: SlideshowData
}

type SlideData {
  image: String!
  title: String!
  secondaryTitle: String
}

type Slide {
  component: String!
  treatment: String
  data: SlideData
}

type Page implements Component {
  id: ID!
  treatment: String
  component: String!
  name: String!
  featured: Featured
  sections: [Section]!
}

enum SupportedPlatforms {
  iOS
  tvOS
  roku
  rokuStick
  samsungTv
  android
  androidTv
  xboxOne
  web
  mobileWeb
  fireTablet
  fireTv
  fireTvStick
  vizio
}

type Query {
  page(
    id: ID
    name: String!
    userId: String!
    platform: SupportedPlatforms!
  ): Page
}
```

```graphql 50:64
interface Component {
  component: String!
  treatment: String
}

type VideoTile implements Component {
  component: String!
  treatment: String
  data: VideoData
}

type VideoData {
  image: String!
  title: String!
  secondaryTitle: String!
  percentViewed: Float
}

type SeriesTile implements Component {
  component: String!
  treatment: String
  data: SeriesData
}

type SeriesData {
  image: String!
  title: String!
  secondaryTitle: String!
  favoriteId: String
}

union Tile = VideoTile | SeriesTile

type ShelfData {
  title: String
  items: [Tile]
}

interface Section {
  component: String!
  treatment: String
}

type Shelf implements Section & Component {
  component: String!
  treatment: String
  data: ShelfData
}

interface Featured {
  component: String!
  treatment: String
}

type SlideshowData {
  items: [Slide]
}

type Slideshow implements Featured & Component {
  component: String!
  treatment: String
  data: SlideshowData
}

type SlideData {
  image: String!
  title: String!
  secondaryTitle: String
}

type Slide {
  component: String!
  treatment: String
  data: SlideData
}

type Page implements Component {
  id: ID!
  treatment: String
  component: String!
  name: String!
  featured: Featured
  sections: [Section]!
}

enum SupportedPlatforms {
  iOS
  tvOS
  roku
  rokuStick
  samsungTv
  android
  androidTv
  xboxOne
  web
  mobileWeb
  fireTablet
  fireTv
  fireTvStick
  vizio
}

type Query {
  page(
    id: ID
    name: String!
    userId: String!
    platform: SupportedPlatforms!
  ): Page
}
```

```graphql 75:93
interface Component {
  component: String!
  treatment: String
}

type VideoTile implements Component {
  component: String!
  treatment: String
  data: VideoData
}

type VideoData {
  image: String!
  title: String!
  secondaryTitle: String!
  percentViewed: Float
}

type SeriesTile implements Component {
  component: String!
  treatment: String
  data: SeriesData
}

type SeriesData {
  image: String!
  title: String!
  secondaryTitle: String!
  favoriteId: String
}

union Tile = VideoTile | SeriesTile

type ShelfData {
  title: String
  items: [Tile]
}

interface Section {
  component: String!
  treatment: String
}

type Shelf implements Section & Component {
  component: String!
  treatment: String
  data: ShelfData
}

interface Featured {
  component: String!
  treatment: String
}

type SlideshowData {
  items: [Slide]
}

type Slideshow implements Featured & Component {
  component: String!
  treatment: String
  data: SlideshowData
}

type SlideData {
  image: String!
  title: String!
  secondaryTitle: String
}

type Slide {
  component: String!
  treatment: String
  data: SlideData
}

type Page implements Component {
  id: ID!
  treatment: String
  component: String!
  name: String!
  featured: Featured
  sections: [Section]!
}

type Query {
  page(
    id: ID
    name: String!
    userId: String!
    platform: SupportedPlatforms!
  ): Page
}

enum SupportedPlatforms {
  iOS
  tvOS
  roku
  rokuStick
  samsungTv
  android
  androidTv
  xboxOne
  web
  mobileWeb
  fireTablet
  fireTv
  fireTvStick
  vizio
}
```


</CodeSurferLayout>
</Center>

---

<iframe 
  src="https://h0iw8-4000.sse.codesandbox.io"
  style={{
    padding: '2%',
    width: '100%',
    height: '100%'
  }}
  frameBorder="0"
  scrolling="no"
  title="GraphQL Playground"
>
</iframe>

---

### Simpler, presentational frontends
### Centralized business logic
### Centralized A/B Testing and Feature Flagging
### Design consistency via a ‚ÄúDesign Schema‚Äù
### Query optimization

---

<Center>
<CodeSurferLayout>

```jsx 3:17
import React from 'react';

function Slideshow(props) {
  // Slideshow manages its own slide number state
  const slideNumber = useTimedCounter(props.items.length);
  return (
    <div className="slideshow">
      {props.items.map(slide =>
        // Render children with the current slideNumber and the API data
        renderComponent(
          COMPONENTS_DICTIONARY,
          { ...slide, slideNumber }
        )
      )}
    </div>
  );
}

function Slide(props) {
  return (
    <div className="slide">
      <img alt={props.title} src={props.image} />
      <h1>{props.title}</h1>
    </div>
  );
}

function Shelf(props) {
  return (
    <div className="shelf">
      {props.items.map(tile =>
        // Render children with the current slideNumber and the API data
        renderComponent(
          COMPONENTS_DICTIONARY,
          { ...tile, slideNumber }
        )
      )}
    </div>
  );
}

function SeriesTile(props) {
  return (
    <div className="seriesTile">
      <Link to={`/shows/${props.urlAlias}`}>
        <img alt={props.title} src={props.image} />
      </Link>
      <p>{props.title}</p>
    </div>
  );
}

/**
 * These dictionaries match our GraphQL interfaces
 */

const FEATURED_DICTIONARY = {
  Slideshow
};

const COMPONENTS_DICTIONARY = {
  Slide,
  SeriesTile
};

const SECTIONS_DICTIONARY = {
  Shelf
};

export function renderComponent(
  DICTIONARY,
  { component, data }
) {
  const Component = DICTIONARY[component];
  if (!Component) {
    return null;
  }
  return <Component {...data} />;
}

export default function App() {
  const [loading, data] = useComponentAPIFetch();
  if (loading) {
    return 'loading...';
  }
  return (
    <div>
      <section className="featured">
        {renderComponent(FEATURED_DICTIONARY, data.featured)}
      </section>
      <section className="sections">
        {data.sections.map(section =>
          renderComponent(SECTIONS_DICTIONARY, section)
        )}
      </section>
    </div>
  );
}
```

```jsx 9:14
import React from 'react';

function Slideshow(props) {
  // Slideshow manages its own slide number state
  const slideNumber = useTimedCounter(props.items.length);
  return (
    <div className="slideshow">
      {props.items.map(slide =>
        // Render children with the current slideNumber and the API data
        renderComponent(
          COMPONENTS_DICTIONARY,
          { ...slide, slideNumber }
        )
      )}
    </div>
  );
}

function Slide(props) {
  return (
    <div className="slide">
      <img alt={props.title} src={props.image} />
      <h1>{props.title}</h1>
    </div>
  );
}

function Shelf(props) {
  return (
    <div className="shelf">
      {props.items.map(tile =>
        // Render children with the current slideNumber and the API data
        renderComponent(
          COMPONENTS_DICTIONARY,
          { ...tile, slideNumber }
        )
      )}
    </div>
  );
}

function SeriesTile(props) {
  return (
    <div className="seriesTile">
      <Link to={`/shows/${props.urlAlias}`}>
        <img alt={props.title} src={props.image} />
      </Link>
      <p>{props.title}</p>
    </div>
  );
}

/**
 * These dictionaries match our GraphQL interfaces
 */

const FEATURED_DICTIONARY = {
  Slideshow
};

const COMPONENTS_DICTIONARY = {
  Slide,
  SeriesTile
};

const SECTIONS_DICTIONARY = {
  Shelf
};

export function renderComponent(
  DICTIONARY,
  { component, data }
) {
  const Component = DICTIONARY[component];
  if (!Component) {
    return null;
  }
  return <Component {...data} />;
}

export default function App() {
  const [loading, data] = useComponentAPIFetch();
  if (loading) {
    return 'loading...';
  }
  return (
    <div>
      <section className="featured">
        {renderComponent(FEATURED_DICTIONARY, data.featured)}
      </section>
      <section className="sections">
        {data.sections.map(section =>
          renderComponent(SECTIONS_DICTIONARY, section)
        )}
      </section>
    </div>
  );
}
```

```jsx 19:26
import React from 'react';

function Slideshow(props) {
  // Slideshow manages its own slide number state
  const slideNumber = useTimedCounter(props.items.length);
  return (
    <div className="slideshow">
      {props.items.map(slide =>
        // Render children with the current slideNumber and the API data
        renderComponent(
          COMPONENTS_DICTIONARY,
          { ...slide, slideNumber }
        )
      )}
    </div>
  );
}

function Slide(props) {
  return (
    <div className="slide">
      <img alt={props.title} src={props.image} />
      <h1>{props.title}</h1>
    </div>
  );
}

function Shelf(props) {
  return (
    <div className="shelf">
      {props.items.map(tile =>
        // Render children with the current slideNumber and the API data
        renderComponent(
          COMPONENTS_DICTIONARY,
          { ...tile, slideNumber }
        )
      )}
    </div>
  );
}

function SeriesTile(props) {
  const a = `/shows/${props.urlAlias}`
  return (
    <div className="seriesTile">
      <Link to={a}>
        <img alt={props.title} src={props.image} />
      </Link>
      <p>{props.title}</p>
    </div>
  );
}

/**
 * These dictionaries match our GraphQL interfaces
 */

const FEATURED_DICTIONARY = {
  Slideshow
};

const COMPONENTS_DICTIONARY = {
  Slide,
  SeriesTile
};

const SECTIONS_DICTIONARY = {
  Shelf
};

export function renderComponent(
  DICTIONARY,
  { component, data }
) {
  const Component = DICTIONARY[component];
  if (!Component) {
    return null;
  }
  return <Component {...data} />;
}

export default function App() {
  const [loading, data] = useComponentAPIFetch();
  if (loading) {
    return 'loading...';
  }
  return (
    <div>
      <section className="featured">
        {renderComponent(FEATURED_DICTIONARY, data.featured)}
      </section>
      <section className="sections">
        {data.sections.map(section =>
          renderComponent(SECTIONS_DICTIONARY, section)
        )}
      </section>
    </div>
  );
}
```


```jsx 54:68
import React from 'react';

function Slideshow(props) {
  // Slideshow manages its own slide number state
  const slideNumber = useTimedCounter(props.items.length);
  return (
    <div className="slideshow">
      {props.items.map(slide =>
        // Render children with the current slideNumber and the API data
        renderComponent(
          COMPONENTS_DICTIONARY,
          { ...slide, slideNumber }
        )
      )}
    </div>
  );
}

function Slide(props) {
  return (
    <div className="slide">
      <img alt={props.title} src={props.image} />
      <h1>{props.title}</h1>
    </div>
  );
}

function Shelf(props) {
  return (
    <div className="shelf">
      {props.items.map(tile =>
        // Render children with the current slideNumber and the API data
        renderComponent(
          COMPONENTS_DICTIONARY,
          tile
        )
      )}
    </div>
  );
}

function SeriesTile(props) {
  const a = `/shows/${props.urlAlias}`
  return (
    <div className="seriesTile">
      <Link to={a}>
        <img alt={props.title} src={props.image} />
      </Link>
      <p>{props.title}</p>
    </div>
  );
}

/**
 * These dictionaries match our GraphQL interfaces
 */

const FEATURED_DICTIONARY = {
  Slideshow
};

const COMPONENTS_DICTIONARY = {
  Slide,
  SeriesTile
};

const SECTIONS_DICTIONARY = {
  Shelf
};

export function renderComponent(
  DICTIONARY,
  { component, data }
) {
  const Component = DICTIONARY[component];
  if (!Component) {
    return null;
  }
  return <Component {...data} />;
}

export default function App() {
  const [loading, data] = useComponentAPIFetch();
  if (loading) {
    return 'loading...';
  }
  return (
    <div>
      <section className="featured">
        {renderComponent(FEATURED_DICTIONARY, data.featured)}
      </section>
      <section className="sections">
        {data.sections.map(section =>
          renderComponent(SECTIONS_DICTIONARY, section)
        )}
      </section>
    </div>
  );
}
```

```jsx 69:80
import React from 'react';

function Slideshow(props) {
  // Slideshow manages its own slide number state
  const slideNumber = useTimedCounter(props.items.length);
  return (
    <div className="slideshow">
      {props.items.map(slide =>
        // Render children with the current slideNumber and the API data
        renderComponent(
          COMPONENTS_DICTIONARY,
          { ...slide, slideNumber }
        )
      )}
    </div>
  );
}

function Slide(props) {
  return (
    <div className="slide">
      <img alt={props.title} src={props.image} />
      <h1>{props.title}</h1>
    </div>
  );
}

function Shelf(props) {
  return (
    <div className="shelf">
      {props.items.map(tile =>
        // Render children with the current slideNumber and the API data
        renderComponent(
          COMPONENTS_DICTIONARY,
          tile
        )
      )}
    </div>
  );
}

function SeriesTile(props) {
  const a = `/shows/${props.urlAlias}`
  return (
    <div className="seriesTile">
      <Link to={a}>
        <img alt={props.title} src={props.image} />
      </Link>
      <p>{props.title}</p>
    </div>
  );
}

/**
 * These dictionaries match our GraphQL interfaces
 */

const FEATURED_DICTIONARY = {
  Slideshow
};

const COMPONENTS_DICTIONARY = {
  Slide,
  SeriesTile
};

const SECTIONS_DICTIONARY = {
  Shelf
};

export function renderComponent(
  DICTIONARY,
  { component, data }
) {
  const Component = DICTIONARY[component];
  if (!Component) {
    return null;
  }
  return <Component {...data} />;
}

export default function App() {
  const [loading, data] = useComponentAPIFetch();
  if (loading) {
    return 'loading...';
  }
  return (
    <div>
      <section className="featured">
        {renderComponent(FEATURED_DICTIONARY, data.featured)}
      </section>
      <section className="sections">
        {data.sections.map(section =>
          renderComponent(SECTIONS_DICTIONARY, section)
        )}
      </section>
    </div>
  );
}
```


```jsx 81:99
import React from 'react';

function Slideshow(props) {
  // Slideshow manages its own slide number state
  const slideNumber = useTimedCounter(props.items.length);
  return (
    <div className="slideshow">
      {props.items.map(slide =>
        // Render children with the current slideNumber and the API data
        renderComponent(
          COMPONENTS_DICTIONARY,
          { ...slide, slideNumber }
        )
      )}
    </div>
  );
}

function Slide(props) {
  return (
    <div className="slide">
      <img alt={props.title} src={props.image} />
      <h1>{props.title}</h1>
    </div>
  );
}

function Shelf(props) {
  return (
    <div className="shelf">
      {props.items.map(tile =>
        // Render children with the current slideNumber and the API data
        renderComponent(
          COMPONENTS_DICTIONARY,
          tile
        )
      )}
    </div>
  );
}

function SeriesTile(props) {
  const a = `/shows/${props.urlAlias}`
  return (
    <div className="seriesTile">
      <Link to={a}>
        <img alt={props.title} src={props.image} />
      </Link>
      <p>{props.title}</p>
    </div>
  );
}

/**
 * These dictionaries match our GraphQL interfaces
 */

const FEATURED_DICTIONARY = {
  Slideshow
};

const COMPONENTS_DICTIONARY = {
  Slide,
  SeriesTile
};

const SECTIONS_DICTIONARY = {
  Shelf
};

export function renderComponent(
  DICTIONARY,
  { component, data }
) {
  const Component = DICTIONARY[component];
  if (!Component) {
    return null;
  }
  return <Component {...data} />;
}

export default function App() {
  const [loading, data] = useComponentAPIFetch();
  if (loading) {
    return 'loading...';
  }
  return (
    <div>
      <section className="featured">
        {renderComponent(FEATURED_DICTIONARY, data.featured)}
      </section>
      <section className="sections">
        {data.sections.map(section =>
          renderComponent(SECTIONS_DICTIONARY, section)
        )}
      </section>
    </div>
  );
}
```

</CodeSurferLayout>
</Center>

---

<IconGrid>
    <Database style={{ gridRow: '2/3', gridColumn: '1/2' }} />
    <BusinessLogic style={{ gridRow: '2/3', gridColumn: '2/3' }} />
    <DataFetching style={{ gridRow: '2/3', gridColumn: '3/4'}} />
    <FeatureFlag style={{ gridRow: '3/4', gridColumn: '4/5' }} />
    <ABTest style={{ gridRow: '1/2', gridColumn: '4/5' }} />
    <Components style={{gridRow: '2/3', gridColumn: '4/5' }} />
    <Render style={{ gridRow: '2/3', gridColumn: '5/6' }} />
</IconGrid>
<DecoupleLine steps={['FAR_LEFT', 'LEFT', 'MID_LEFT', 'FAR_RIGHT', 'RIGHT']} />

---

# Thanks! üëãüèª 

## GitHub: [infiniteluke](http://github.com/infiniteluke/)
## Twitter: [lukeherrington](https://twitter.com/lukeherrington)

<img style={{ width: '15%', position: 'absolute', bottom: '50px', right: '30px'}} src="https://www.fourkitchens.com/wp-content/themes/twentysixteen-4k/img/logos/4k-logo.svg" />

---

# Resources

<div style={{margin: '0 5%'}}>

* React - http://reactjs.org
* SwiftUI -  https://developer.apple.com/xcode/swiftui/
* Flutter -  https://flutter.dev/docs/development/ui/widgets-intro
* Roy Fielding's REST Disertation - https://www.ics.uci.edu/~fielding/pubs/dissertation/fielding_dissertation_2up.pdf

</div>

---

# Resources Continued

<div style={{margin: '0 5%'}}>

* HATEOS -  https://roy.gbiv.com/untangled/2008/rest-apis-must-be-hypertext-driven
* JSON:API - https://jsonapi.org
* CRDT - http://radlab.cs.berkeley.edu/people/fox/static/pubs/pdf/c18.pdf
* GraphQL - https://graphql.org

</div>
