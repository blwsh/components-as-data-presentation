import { Head, Notes } from 'mdx-deck';
import { Appear, Image } from '@mdx-deck/components';
import { Split } from '@mdx-deck/layouts';
import { CodeSurferLayout } from 'code-surfer';

import Iframe from './components/Iframe';
import Hero from './components/Hero';
import TeaserText from './components/TeaserText';
import TeaserImage from './components/TeaserImage';

import Switcher from './components/Switcher';
import SwitchSteps from './components/SwitchSteps';
import { SwitchRow, SettingsList } from './components/SwitchHelpers';

import Phone from './components/Phone';
import PhoneWithContent from './components/PhoneWithContent';
import TabletWithContent from './components/TabletWithContent';
import LaptopWithContent from './components/LaptopWithContent';

import IconGrid from './components/IconGrid';
import DecoupleLine from './components/DecoupleLine';
import Database from './components/Database';
import BusinessLogic from './components/BusinessLogic';
import API from './components/API';
import ABTest from './components/ABTest';
import Render from './components/Render';
import Components from './components/Components';
import DataFetching from './components/DataFetching';
import FeatureFlag from './components/FeatureFlag';

import Center from './components/layout/Center';
import Jumbo from './components/layout/Jumbo';
import SideBySide from './components/layout/SideBySide';
import TopCenter from './components/TopCenter';

import { SlideIn, BlurIn, ZoomSteps } from './components/lib';
import config from './config';

export { themes } from './theme';

import './global.css';

<Head>
  <title>Components as Data, by Luke Herrington</title>
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:site" content="@lukeherrington" />
  <meta name="twitter:title" content="Components as Data" />
  <meta
    name="twitter:description"
    content="A Cross Platform GraphQL Powered Component API"
  />
  <meta
    name="twitter:image"
    content="https://user-images.githubusercontent.com/1127238/61584159-3300e080-ab11-11e9-906c-302ee8a22ec9.png"
  />
</Head>

# Hi! üëãüèª I'm Luke

<img
  style={{ borderRadius: '50%', height: '50%' }}
  src="https://lukeherrington.com/static/cdf656371789fe7d89f21fc88d7dffb2/fdbb0/luke-square-sm.png"
/>

---

<TopCenter>
  <h1>Components as Data</h1>
</TopCenter>

<Split>
<PhoneWithContent size={2} style={{ zIndex: 1, position: 'absolute', top: '32%', left: '10%' }} />

<div style={{ padding: '11%' }}>

### A Cross Platform GraphQL Powered Component API

</div>

</Split>

---

<Center>
  <Split>
    <div
      style={{
        display: 'grid',
        gridGap: '0 2em',
        justifyItems: 'center',
        alignItems: 'center',
      }}
    >
      <Hero
        style={{
          width: '8em',
          height: '4em',
          gridRow: '1/2',
          gridColumn: '1/2',
        }}
      />
      <Appear>
        <TeaserImage
          style={{
            width: '4em',
            height: '4em',
            gridRow: '2/3',
            gridColumn: '1/2',
          }}
        />
        <TeaserText
          style={{
            width: '8em',
            height: '3em',
            gridRow: '3/4',
            gridColumn: '1/2',
          }}
        />
      </Appear>
      <h2 style={{ gridRow: '1/2', gridColumn: '2/3', color: '#00CCFF' }}>
        Hero
      </h2>
      <Appear>
        <h2 style={{ gridRow: '2/3', gridColumn: '2/3', color: '#FF19FF' }}>
          Image
        </h2>
        <h2 style={{ gridRow: '3/4', gridColumn: '2/3', color: '#0DE22B' }}>
          Teaser
        </h2>
      </Appear>
    </div>
  </Split>
</Center>

---

<TopCenter><h1>Components Win</h1></TopCenter>
<TabletWithContent size={0}  style={{ position: 'absolute', top: '60%', left: '35%', transform: 'translate(-35%, -60%)' }}  />
<LaptopWithContent size={0}  style={{ position: 'absolute', top: '60%', left: '80%', transform: 'translate(-80%, -60%)' }}  />
<PhoneWithContent size={0} style={{ position: 'absolute', top: '70%', left: '50%', transform: 'translate(-50%, -70%)' }} />

---

<Center>
  <Jumbo>
<CodeSurferLayout>

```js
component = render(props + state);
```

</CodeSurferLayout>
  </Jumbo>

</Center>

---

<Split>
<div style={{ margin: '20px'}}>

### Props

Read-only external data

### State

Local data that changes over time

</div>
<div style={{ margin: '20px'}}>

### Render

Declarative representation of UI

</div>
</Split>

---

<Center>

## `<Switch />`

<SwitchSteps label="Airplane Mode" />
</Center>

---

## Components Compose

<Center vert={false} style={{ marginTop: '15%' }}>
  <SwitchRow style={{ gridColumn: '1/4', gridRow: '1/3' }} key="1">
    <SwitchSteps label="Airplane Mode" />
  </SwitchRow>
</Center>

---

<Phone
  screenTitle="Settings"
  style={{
    position: 'absolute',
    top: '-20%',
    left: '50%',
    transform: 'translate(-50%, 20%)',
  }}
  size="2"
>
  <SwitchRow style={{ gridColumn: '1/4', gridRow: '1/2', width: '100%' }}>
    <SwitchSteps label="Airplane" />
  </SwitchRow>
  <SwitchRow style={{ gridColumn: '1/4', gridRow: '2/3', width: '100%' }}>
    <Switcher label="WiFi" />
  </SwitchRow>
  <SwitchRow style={{ gridColumn: '1/4', gridRow: '3/4', width: '100%' }}>
    <Switcher label="VPN" />
  </SwitchRow>
  <SwitchRow style={{ gridColumn: '1/4', gridRow: '4/5', width: '100%' }}>
    <Switcher label="Bluetooth" />
  </SwitchRow>
  <SwitchRow style={{ gridColumn: '1/4', gridRow: '5/6', width: '100%' }}>
    <Switcher label="Notifications" />
  </SwitchRow>
</Phone>

---

<Center>

# I ‚ù§Ô∏è Components

</Center>

---

<IconGrid>
  <ZoomSteps>
    <Database style={{ gridRow: '2/3', gridColumn: '1/2' }} />
    <BusinessLogic style={{ gridRow: '2/3', gridColumn: '2/3' }} />
    <DataFetching style={{ gridRow: '2/3', gridColumn: '3/4' }} />
    <FeatureFlag style={{ gridRow: '3/4', gridColumn: '4/5' }} />
    <ABTest style={{ gridRow: '1/2', gridColumn: '4/5' }} />
    <Components style={{ gridRow: '2/3', gridColumn: '4/5' }} />
    <Render style={{ gridRow: '2/3', gridColumn: '5/6' }} />
  </ZoomSteps>
</IconGrid>

---

<Center>

# Decoupling

## Who What When Where Why How

</Center>

---

<Center style={{ fonSize: '1.2em' }}>

<h1 style={{ color: '#4be8ff', }}>
Where? ü§î
</h1>

</Center>

---

## The Decouple Line

<DecoupleLine steps={['MID_LEFT', 'LEFT', 'RIGHT', 'MID_RIGHT']} />

---

<IconGrid>
    <Database style={{ gridRow: '2/3', gridColumn: '1/2' }} />
    <BusinessLogic style={{ gridRow: '2/3', gridColumn: '2/3' }} />
    <DataFetching style={{ gridRow: '2/3', gridColumn: '3/4'}} />
    <FeatureFlag style={{ gridRow: '3/4', gridColumn: '4/5' }} />
    <ABTest style={{ gridRow: '1/2', gridColumn: '4/5' }} />
    <Components style={{gridRow: '2/3', gridColumn: '4/5' }} />
    <Render style={{ gridRow: '2/3', gridColumn: '5/6' }} />
</IconGrid>
<DecoupleLine steps={['LEFT']} />

---

<Center>
  <h1 style={{ color: '#4be8ff' }}>REST‚Ñ¢</h1>
</Center>

---

<IconGrid>
    <Database style={{ gridRow: '2/3', gridColumn: '1/2' }} />
    <BusinessLogic style={{ gridRow: '2/3', gridColumn: '2/3' }} />
    <DataFetching style={{ gridRow: '2/3', gridColumn: '3/4'}} />
    <FeatureFlag style={{ gridRow: '3/4', gridColumn: '4/5' }} />
    <ABTest style={{ gridRow: '1/2', gridColumn: '4/5' }} />
    <Components style={{gridRow: '2/3', gridColumn: '4/5' }} />
    <Render style={{ gridRow: '2/3', gridColumn: '5/6' }} />
</IconGrid>
<DecoupleLine steps={['LEFT', 'MID_LEFT']} />

---

<Center>
  <h1 style={{ color: '#4be8ff' }}>More than just "resources"</h1>
</Center>

---

<Center>

<h1 style={{ color: '#FF19FF', }}>
HATEOAS
</h1>

## Hypermedia as the Engine of Application State

</Center>

---

<Center>
<CodeSurferLayout>

```json subtitle="If these exist, create the buttons to fetch more data"
{
  "links": {
    "self": "https://api.test.com/list?page[number]=1&page[size]=100",
    "next": "https://api.test.com/list?page[number]=2&page[size]=100",
    "prev": "https://api.test.com/list?page[number]=0&page[size]=100",
    "last": "https://api.test.com/list?page[number]=33&page[size]=100",
    "first": "https://api.test.com/list?page[number]=0&page[size]=100"
  }
}
```

</CodeSurferLayout>
</Center>

---

<IconGrid>
    <Database style={{ gridRow: '2/3', gridColumn: '1/2' }} />
    <BusinessLogic style={{ gridRow: '2/3', gridColumn: '2/3' }} />
    <DataFetching style={{ gridRow: '2/3', gridColumn: '3/4'}} />
    <FeatureFlag style={{ gridRow: '3/4', gridColumn: '4/5' }} />
    <ABTest style={{ gridRow: '1/2', gridColumn: '4/5' }} />
    <Components style={{gridRow: '2/3', gridColumn: '4/5' }} />
    <Render style={{ gridRow: '2/3', gridColumn: '5/6' }} />
</IconGrid>
<DecoupleLine steps={['MID_LEFT', 'FAR_RIGHT']} />

---

<Center>
  <h1>Microservices:</h1>
  <h2 style={{ color: '#4be8ff', margin: '5%' }}>Now you have two problems</h2>
</Center>

---

<IconGrid>
    <Database style={{ gridRow: '2/3', gridColumn: '1/2' }} />
    <BusinessLogic style={{ gridRow: '2/3', gridColumn: '2/3' }} />
    <DataFetching style={{ gridRow: '2/3', gridColumn: '3/4'}} />
    <FeatureFlag style={{ gridRow: '3/4', gridColumn: '4/5' }} />
    <ABTest style={{ gridRow: '1/2', gridColumn: '4/5' }} />
    <Components style={{gridRow: '2/3', gridColumn: '4/5' }} />
    <Render style={{ gridRow: '2/3', gridColumn: '5/6' }} />
</IconGrid>
<DecoupleLine steps={['FAR_RIGHT', 'FAR_LEFT']} />

---

<Center>
  <h1 style={{ color: '#4be8ff' }}>Wait.. What?</h1>
  <h2 style={{ margin: 0, fontSize: '3em' }}>üßê</h2>
</Center>

---

<Center>/get-off-soapbox</Center>

---

<IconGrid>
    <Database style={{ gridRow: '2/3', gridColumn: '1/2' }} />
    <BusinessLogic style={{ gridRow: '2/3', gridColumn: '2/3' }} />
    <DataFetching style={{ gridRow: '2/3', gridColumn: '3/4'}} />
    <FeatureFlag style={{ gridRow: '3/4', gridColumn: '4/5' }} />
    <ABTest style={{ gridRow: '1/2', gridColumn: '4/5' }} />
    <Components style={{gridRow: '2/3', gridColumn: '4/5' }} />
    <Render style={{ gridRow: '2/3', gridColumn: '5/6' }} />
</IconGrid>
<DecoupleLine steps={['FAR_LEFT', 'RIGHT']} />

---

# Components as Data

<API style={{ height: '40%'}} />
<Center vert={false}>
  <div style={{display: 'flex', flexDirection: 'row', justifyItems: 'space-around', alignItems: 'center'}}>
    <Hero style={{width:'3em', height: '1.5em', }} />
    <TeaserImage style={{width:'2em', height: '2em', margin: '0 0.8em' }} />
    <TeaserText style={{width:'3em', height: '1em', }} />
  </div>
</Center>

---

<Center>
  <Split>
    <div
      style={{
        display: 'grid',
        gridGap: '0 2em',
        justifyItems: 'center',
        alignItems: 'center',
      }}
    >
      <Hero
        style={{
          width: '8em',
          height: '4em',
          gridRow: '1/2',
          gridColumn: '1/2',
        }}
      />
      <Appear>
        <TeaserImage
          style={{
            width: '4em',
            height: '4em',
            gridRow: '2/3',
            gridColumn: '1/2',
          }}
        />
        <TeaserText
          style={{
            width: '8em',
            height: '3em',
            gridRow: '3/4',
            gridColumn: '1/2',
          }}
        />
      </Appear>
      <h2
        style={{
          gridRow: '1/2',
          gridColumn: '2/3',
          color: '#00CCFF',
          paddingLeft: '5%',
        }}
      >
        {'{...}'}
      </h2>
      <Appear>
        <h2 style={{ gridRow: '2/3', gridColumn: '2/3', color: '#FF19FF' }}>
          {'{...}'}
        </h2>
        <h2 style={{ gridRow: '3/4', gridColumn: '2/3', color: '#0DE22B' }}>
          {'{...}'}
        </h2>
      </Appear>
    </div>
  </Split>
</Center>

---

<Center>
<CodeSurferLayout>

```json subtitle="Components as Data Example"
{
  "component": "Hero",
  "data": {
    "title": "Welcome!",
    "backgroundImage": "https://via.placeholder.com/700x400",
    "subtitle": "Make yourself at home"
  }
}
```

```json 2 subtitle="The component field maps to your component lib"
{
  "component": "Hero",
  "data": {
    "title": "Welcome!",
    "backgroundImage": "https://via.placeholder.com/700x400",
    "subtitle": "Make yourself at home"
  }
}
```

```json 3:7 subtitle="The data field is passed as props to the component"
{
  "component": "Hero",
  "data": {
    "title": "Welcome!",
    "backgroundImage": "https://via.placeholder.com/700x400",
    "subtitle": "Make yourself at home"
  }
}
```

</CodeSurferLayout>
</Center>

---

<Center>

<h1 style={{ color: '#4be8ff', }}>
Separation of concerns
</h1>

</Center>

---

<Iframe
  fallback={
    <img style={{ height: '100%' }} src="./images/nbcdotcomhomepage.gif" />
  }
  src="https://nbc.com"
  title="NBC.com"
></Iframe>

---

<IconGrid>
    <Database style={{ gridRow: '2/3', gridColumn: '1/2' }} />
    <BusinessLogic style={{ gridRow: '2/3', gridColumn: '2/3' }} />
    <DataFetching style={{ gridRow: '2/3', gridColumn: '3/4'}} />
    <FeatureFlag style={{ gridRow: '3/4', gridColumn: '4/5' }} />
    <ABTest style={{ gridRow: '1/2', gridColumn: '4/5' }} />
    <Components style={{gridRow: '2/3', gridColumn: '4/5' }} />
    <Render style={{ gridRow: '2/3', gridColumn: '5/6' }} />
</IconGrid>
<DecoupleLine steps={['LEFT', 'MID_RIGHT', 'RIGHT']} />

---

<Center>

## Slideshow

#### Slide

## Shelf

#### SeriesTile

#### VideoTile

</Center>

---

<Center>

<h1 style={{ color: '#4be8ff', }}>
Why GraphQL
</h1>

<Appear>
  <h2>Types</h2>
  <h2>Queries</h2>
</Appear>

</Center>

---

<Center>
<CodeSurferLayout>

```graphql 1:17 subtitle="We decouple a component from its data for reuse"
interface Component {
  component: String!
  treatment: String
}

type VideoTile implements Component {
  component: String!
  treatment: String
  data: VideoData
}

type VideoData {
  image: String!
  title: String!
  secondaryTitle: String!
  percentViewed: Float
}

type SeriesTile implements Component {
  component: String!
  treatment: String
  data: SeriesData
}

type SeriesData {
  image: String!
  title: String!
  secondaryTitle: String!
  favoriteId: String
}

union Tile = VideoTile | SeriesTile

type ShelfData {
  title: String
  items: [Tile]
}

interface Section {
  component: String!
  treatment: String
}

type Shelf implements Section & Component {
  component: String!
  treatment: String
  data: ShelfData
}

interface Featured {
  component: String!
  treatment: String
}

type SlideshowData {
  items: [Slide]
}

type Slideshow implements Featured & Component {
  component: String!
  treatment: String
  data: SlideshowData
}

type SlideData {
  image: String!
  title: String!
  secondaryTitle: String
}

type Slide {
  component: String!
  treatment: String
  data: SlideData
}

type Page implements Component {
  id: ID!
  treatment: String
  component: String!
  name: String!
  featured: Featured
  sections: [Section]!
}

enum SupportedPlatforms {
  iOS
  tvOS
  roku
  rokuStick
  samsungTv
  android
  androidTv
  xboxOne
  web
  mobileWeb
  fireTablet
  fireTv
  fireTvStick
  vizio
}

type Query {
  page(
    id: ID
    name: String!
    userId: String!
    platform: SupportedPlatforms!
  ): Page
}
```

```graphql 18:37 subtitle="A shelf has a title and tiles"
interface Component {
  component: String!
  treatment: String
}

type VideoTile implements Component {
  component: String!
  treatment: String
  data: VideoData
}

type VideoData {
  image: String!
  title: String!
  secondaryTitle: String!
  percentViewed: Float
}

type SeriesTile implements Component {
  component: String!
  treatment: String
  data: SeriesData
}

type SeriesData {
  image: String!
  title: String!
  secondaryTitle: String!
  favoriteId: String
}

union Tile = VideoTile | SeriesTile

type ShelfData {
  title: String
  items: [Tile]
}

interface Section {
  component: String!
  treatment: String
}

type Shelf implements Section & Component {
  component: String!
  treatment: String
  data: ShelfData
}

interface Featured {
  component: String!
  treatment: String
}

type SlideshowData {
  items: [Slide]
}

type Slideshow implements Featured & Component {
  component: String!
  treatment: String
  data: SlideshowData
}

type SlideData {
  image: String!
  title: String!
  secondaryTitle: String
}

type Slide {
  component: String!
  treatment: String
  data: SlideData
}

type Page implements Component {
  id: ID!
  treatment: String
  component: String!
  name: String!
  featured: Featured
  sections: [Section]!
}

enum SupportedPlatforms {
  iOS
  tvOS
  roku
  rokuStick
  samsungTv
  android
  androidTv
  xboxOne
  web
  mobileWeb
  fireTablet
  fireTv
  fireTvStick
  vizio
}

type Query {
  page(
    id: ID
    name: String!
    userId: String!
    platform: SupportedPlatforms!
  ): Page
}
```

```graphql 34:48  subtitle="A shelf is a Section and a Component"
interface Component {
  component: String!
  treatment: String
}

type VideoTile implements Component {
  component: String!
  treatment: String
  data: VideoData
}

type VideoData {
  image: String!
  title: String!
  secondaryTitle: String!
  percentViewed: Float
}

type SeriesTile implements Component {
  component: String!
  treatment: String
  data: SeriesData
}

type SeriesData {
  image: String!
  title: String!
  secondaryTitle: String!
  favoriteId: String
}

union Tile = VideoTile | SeriesTile

type ShelfData {
  title: String
  items: [Tile]
}

interface Section {
  component: String!
  treatment: String
}

type Shelf implements Section & Component {
  component: String!
  treatment: String
  data: ShelfData
}

interface Featured {
  component: String!
  treatment: String
}

type SlideshowData {
  items: [Slide]
}

type Slideshow implements Featured & Component {
  component: String!
  treatment: String
  data: SlideshowData
}

type SlideData {
  image: String!
  title: String!
  secondaryTitle: String
}

type Slide {
  component: String!
  treatment: String
  data: SlideData
}

type Page implements Component {
  id: ID!
  treatment: String
  component: String!
  name: String!
  featured: Featured
  sections: [Section]!
}

enum SupportedPlatforms {
  iOS
  tvOS
  roku
  rokuStick
  samsungTv
  android
  androidTv
  xboxOne
  web
  mobileWeb
  fireTablet
  fireTv
  fireTvStick
  vizio
}

type Query {
  page(
    id: ID
    name: String!
    userId: String!
    platform: SupportedPlatforms!
  ): Page
}
```

```graphql 50:64 subtitle="A slideshow is featured. It's not a section"
interface Component {
  component: String!
  treatment: String
}

type VideoTile implements Component {
  component: String!
  treatment: String
  data: VideoData
}

type VideoData {
  image: String!
  title: String!
  secondaryTitle: String!
  percentViewed: Float
}

type SeriesTile implements Component {
  component: String!
  treatment: String
  data: SeriesData
}

type SeriesData {
  image: String!
  title: String!
  secondaryTitle: String!
  favoriteId: String
}

union Tile = VideoTile | SeriesTile

type ShelfData {
  title: String
  items: [Tile]
}

interface Section {
  component: String!
  treatment: String
}

type Shelf implements Section & Component {
  component: String!
  treatment: String
  data: ShelfData
}

interface Featured {
  component: String!
  treatment: String
}

type SlideshowData {
  items: [Slide]
}

type Slideshow implements Featured & Component {
  component: String!
  treatment: String
  data: SlideshowData
}

type SlideData {
  image: String!
  title: String!
  secondaryTitle: String
}

type Slide {
  component: String!
  treatment: String
  data: SlideData
}

type Page implements Component {
  id: ID!
  treatment: String
  component: String!
  name: String!
  featured: Featured
  sections: [Section]!
}

enum SupportedPlatforms {
  iOS
  tvOS
  roku
  rokuStick
  samsungTv
  android
  androidTv
  xboxOne
  web
  mobileWeb
  fireTablet
  fireTv
  fireTvStick
  vizio
}

type Query {
  page(
    id: ID
    name: String!
    userId: String!
    platform: SupportedPlatforms!
  ): Page
}
```

```graphql 77:93 subtitle="A page component has slots for respective interfaces"
interface Component {
  component: String!
  treatment: String
}

type VideoTile implements Component {
  component: String!
  treatment: String
  data: VideoData
}

type VideoData {
  image: String!
  title: String!
  secondaryTitle: String!
  percentViewed: Float
}

type SeriesTile implements Component {
  component: String!
  treatment: String
  data: SeriesData
}

type SeriesData {
  image: String!
  title: String!
  secondaryTitle: String!
  favoriteId: String
}

union Tile = VideoTile | SeriesTile

type ShelfData {
  title: String
  items: [Tile]
}

interface Section {
  component: String!
  treatment: String
}

type Shelf implements Section & Component {
  component: String!
  treatment: String
  data: ShelfData
}

interface Featured {
  component: String!
  treatment: String
}

type SlideshowData {
  items: [Slide]
}

type Slideshow implements Featured & Component {
  component: String!
  treatment: String
  data: SlideshowData
}

type SlideData {
  image: String!
  title: String!
  secondaryTitle: String
}

type Slide {
  component: String!
  treatment: String
  data: SlideData
}

type Page implements Component {
  id: ID!
  treatment: String
  component: String!
  name: String!
  featured: Featured
  sections: [Section]!
}

type Query {
  page(
    id: ID
    name: String!
    userId: String!
    platform: SupportedPlatforms!
  ): Page
}
```

</CodeSurferLayout>
</Center>

---

<Iframe
  fallback={
    <img
      style={{ height: '100%' }}
      src="./images/graphql-componentsasdata.gif"
    />
  }
  src={`${config.baseURL}/.netlify/functions/graphql`}
  title="GraphQL Playground"
></Iframe>

---

<Center>
  <h1 style={{ color: '#0DE22B' }}>Design Schema</h1>
</Center>

---

<Iframe
  fallback={
    <img
      style={{ height: '100%' }}
      src="./images/voyager-componentsasdata.gif"
    />
  }
  src={`${config.baseURL}/.netlify/functions/voyager`}
  title="GraphQL Voyager"
></Iframe>

---

<Center>
  <h1 style={{ color: '#4be8ff' }}>Sample Implementation</h1>
</Center>

---

<Center>
<CodeSurferLayout>

```jsx 3:14 subtitle="Slideshow has state and data from the API"
import React from 'react';

function Slideshow(props) {
  // Slideshow manages its own slide number state
  const slideNumber = useTimedCounter(props.items.length);
  return (
    <div className="slideshow">
      {props.items.map(slide =>
        // Render children with the current slideNumber and the API data
        renderComponent(COMPONENTS_DICTIONARY, { ...slide, slideNumber })
      )}
    </div>
  );
}

function Slide(props) {
  return (
    <div className="slide">
      <img alt={props.title} src={props.image} />
      <h1>{props.title}</h1>
    </div>
  );
}

function Shelf(props) {
  return (
    <div className="shelf">
      {props.items.map(tile =>
        // Render children with the current slideNumber and the API data
        renderComponent(COMPONENTS_DICTIONARY, { ...tile, slideNumber })
      )}
    </div>
  );
}

function SeriesTile(props) {
  return (
    <div className="seriesTile">
      <Link to={`/shows/${props.urlAlias}`}>
        <img alt={props.title} src={props.image} />
      </Link>
      <p>{props.title}</p>
    </div>
  );
}

/**
 * These dictionaries match our GraphQL interfaces
 */

const FEATURED_DICTIONARY = {
  Slideshow,
};

const COMPONENTS_DICTIONARY = {
  Slide,
  SeriesTile,
};

const SECTIONS_DICTIONARY = {
  Shelf,
};

export function renderComponent(DICTIONARY, { component, data }) {
  const Component = DICTIONARY[component];
  if (!Component) {
    return null;
  }
  return <Component {...data} />;
}

export default function App() {
  const [loading, data] = useComponentAPIFetch();
  if (loading) {
    return 'loading...';
  }
  return (
    <div>
      <section className="featured">
        {renderComponent(FEATURED_DICTIONARY, data.featured)}
      </section>
      <section className="sections">
        {data.sections.map(section =>
          renderComponent(SECTIONS_DICTIONARY, section)
        )}
      </section>
    </div>
  );
}
```

```jsx 8:11 subtitle="It generically renders its children"
import React from 'react';

function Slideshow(props) {
  // Slideshow manages its own slide number state
  const slideNumber = useTimedCounter(props.items.length);
  return (
    <div className="slideshow">
      {props.items.map(slide =>
        // Render children with the current slideNumber and the API data
        renderComponent(COMPONENTS_DICTIONARY, { ...slide, slideNumber })
      )}
    </div>
  );
}

function Slide(props) {
  return (
    <div className="slide">
      <img alt={props.title} src={props.image} />
      <h1>{props.title}</h1>
    </div>
  );
}

function Shelf(props) {
  return (
    <div className="shelf">
      {props.items.map(tile =>
        // Render children with the current slideNumber and the API data
        renderComponent(COMPONENTS_DICTIONARY, { ...tile, slideNumber })
      )}
    </div>
  );
}

function SeriesTile(props) {
  return (
    <div className="seriesTile">
      <Link to={`/shows/${props.urlAlias}`}>
        <img alt={props.title} src={props.image} />
      </Link>
      <p>{props.title}</p>
    </div>
  );
}

/**
 * These dictionaries match our GraphQL interfaces
 */

const FEATURED_DICTIONARY = {
  Slideshow,
};

const COMPONENTS_DICTIONARY = {
  Slide,
  SeriesTile,
};

const SECTIONS_DICTIONARY = {
  Shelf,
};

export function renderComponent(DICTIONARY, { component, data }) {
  const Component = DICTIONARY[component];
  if (!Component) {
    return null;
  }
  return <Component {...data} />;
}

export default function App() {
  const [loading, data] = useComponentAPIFetch();
  if (loading) {
    return 'loading...';
  }
  return (
    <div>
      <section className="featured">
        {renderComponent(FEATURED_DICTIONARY, data.featured)}
      </section>
      <section className="sections">
        {data.sections.map(section =>
          renderComponent(SECTIONS_DICTIONARY, section)
        )}
      </section>
    </div>
  );
}
```

```jsx 16:23
import React from 'react';

function Slideshow(props) {
  // Slideshow manages its own slide number state
  const slideNumber = useTimedCounter(props.items.length);
  return (
    <div className="slideshow">
      {props.items.map(slide =>
        // Render children with the current slideNumber and the API data
        renderComponent(COMPONENTS_DICTIONARY, { ...slide, slideNumber })
      )}
    </div>
  );
}

function Slide(props) {
  return (
    <div className="slide">
      <img alt={props.title} src={props.image} />
      <h1>{props.title}</h1>
    </div>
  );
}

function Shelf(props) {
  return (
    <div className="shelf">
      {props.items.map(tile =>
        // Render children with the current slideNumber and the API data
        renderComponent(COMPONENTS_DICTIONARY, { ...tile, slideNumber })
      )}
    </div>
  );
}

function SeriesTile(props) {
  const a = `/shows/${props.urlAlias}`;
  return (
    <div className="seriesTile">
      <Link to={a}>
        <img alt={props.title} src={props.image} />
      </Link>
      <p>{props.title}</p>
    </div>
  );
}

/**
 * These dictionaries match our GraphQL interfaces
 */

const FEATURED_DICTIONARY = {
  Slideshow,
};

const COMPONENTS_DICTIONARY = {
  Slide,
  SeriesTile,
};

const SECTIONS_DICTIONARY = {
  Shelf,
};

export function renderComponent(DICTIONARY, { component, data }) {
  const Component = DICTIONARY[component];
  if (!Component) {
    return null;
  }
  return <Component {...data} />;
}

export default function App() {
  const [loading, data] = useComponentAPIFetch();
  if (loading) {
    return 'loading...';
  }
  return (
    <div>
      <section className="featured">
        {renderComponent(FEATURED_DICTIONARY, data.featured)}
      </section>
      <section className="sections">
        {data.sections.map(section =>
          renderComponent(SECTIONS_DICTIONARY, section)
        )}
      </section>
    </div>
  );
}
```

```jsx 52:63 subtitle="These dictionaries match our GraphQL interfaces"
import React from 'react';

function Slideshow(props) {
  // Slideshow manages its own slide number state
  const slideNumber = useTimedCounter(props.items.length);
  return (
    <div className="slideshow">
      {props.items.map(slide =>
        // Render children with the current slideNumber and the API data
        renderComponent(COMPONENTS_DICTIONARY, { ...slide, slideNumber })
      )}
    </div>
  );
}

function Slide(props) {
  return (
    <div className="slide">
      <img alt={props.title} src={props.image} />
      <h1>{props.title}</h1>
    </div>
  );
}

function Shelf(props) {
  return (
    <div className="shelf">
      {props.items.map(tile =>
        // Render children with the current slideNumber and the API data
        renderComponent(COMPONENTS_DICTIONARY, tile)
      )}
    </div>
  );
}

function SeriesTile(props) {
  const a = `/shows/${props.urlAlias}`;
  return (
    <div className="seriesTile">
      <Link to={a}>
        <img alt={props.title} src={props.image} />
      </Link>
      <p>{props.title}</p>
    </div>
  );
}

/**
 * These dictionaries match our GraphQL interfaces
 */

const FEATURED_DICTIONARY = {
  Slideshow,
};

const COMPONENTS_DICTIONARY = {
  Slide,
  SeriesTile,
};

const SECTIONS_DICTIONARY = {
  Shelf,
};

export function renderComponent(DICTIONARY, { component, data }) {
  const Component = DICTIONARY[component];
  if (!Component) {
    return null;
  }
  return <Component {...data} />;
}

export default function App() {
  const [loading, data] = useComponentAPIFetch();
  if (loading) {
    return 'loading...';
  }
  return (
    <div>
      <section className="featured">
        {renderComponent(FEATURED_DICTIONARY, data.featured)}
      </section>
      <section className="sections">
        {data.sections.map(section =>
          renderComponent(SECTIONS_DICTIONARY, section)
        )}
      </section>
    </div>
  );
}
```

```jsx 65:71 subtitle="Generically render a component from the API"
import React from 'react';

function Slideshow(props) {
  // Slideshow manages its own slide number state
  const slideNumber = useTimedCounter(props.items.length);
  return (
    <div className="slideshow">
      {props.items.map(slide =>
        // Render children with the current slideNumber and the API data
        renderComponent(COMPONENTS_DICTIONARY, { ...slide, slideNumber })
      )}
    </div>
  );
}

function Slide(props) {
  return (
    <div className="slide">
      <img alt={props.title} src={props.image} />
      <h1>{props.title}</h1>
    </div>
  );
}

function Shelf(props) {
  return (
    <div className="shelf">
      {props.items.map(tile =>
        // Render children with the current slideNumber and the API data
        renderComponent(COMPONENTS_DICTIONARY, tile)
      )}
    </div>
  );
}

function SeriesTile(props) {
  const a = `/shows/${props.urlAlias}`;
  return (
    <div className="seriesTile">
      <Link to={a}>
        <img alt={props.title} src={props.image} />
      </Link>
      <p>{props.title}</p>
    </div>
  );
}

/**
 * These dictionaries match our GraphQL interfaces
 */

const FEATURED_DICTIONARY = {
  Slideshow,
};

const COMPONENTS_DICTIONARY = {
  Slide,
  SeriesTile,
};

const SECTIONS_DICTIONARY = {
  Shelf,
};

export function renderComponent(DICTIONARY, { component, data }) {
  const Component = DICTIONARY[component];
  if (!Component) {
    return null;
  }
  return <Component {...data} />;
}

export default function App() {
  const [loading, data] = useComponentAPIFetch();
  if (loading) {
    return 'loading...';
  }
  return (
    <div>
      <section className="featured">
        {renderComponent(FEATURED_DICTIONARY, data.featured)}
      </section>
      <section className="sections">
        {data.sections.map(section =>
          renderComponent(SECTIONS_DICTIONARY, section)
        )}
      </section>
    </div>
  );
}
```

```jsx 73:90 subtitle="Match slots with interface dictionaries and render"
import React from 'react';

function Slideshow(props) {
  // Slideshow manages its own slide number state
  const slideNumber = useTimedCounter(props.items.length);
  return (
    <div className="slideshow">
      {props.items.map(slide =>
        // Render children with the current slideNumber and the API data
        renderComponent(COMPONENTS_DICTIONARY, { ...slide, slideNumber })
      )}
    </div>
  );
}

function Slide(props) {
  return (
    <div className="slide">
      <img alt={props.title} src={props.image} />
      <h1>{props.title}</h1>
    </div>
  );
}

function Shelf(props) {
  return (
    <div className="shelf">
      {props.items.map(tile =>
        // Render children with the current slideNumber and the API data
        renderComponent(COMPONENTS_DICTIONARY, tile)
      )}
    </div>
  );
}

function SeriesTile(props) {
  const a = `/shows/${props.urlAlias}`;
  return (
    <div className="seriesTile">
      <Link to={a}>
        <img alt={props.title} src={props.image} />
      </Link>
      <p>{props.title}</p>
    </div>
  );
}

/**
 * These dictionaries match our GraphQL interfaces
 */

const FEATURED_DICTIONARY = {
  Slideshow,
};

const COMPONENTS_DICTIONARY = {
  Slide,
  SeriesTile,
};

const SECTIONS_DICTIONARY = {
  Shelf,
};

export function renderComponent(DICTIONARY, { component, data }) {
  const Component = DICTIONARY[component];
  if (!Component) {
    return null;
  }
  return <Component {...data} />;
}

export default function App() {
  const [loading, data] = useComponentAPIFetch();
  if (loading) {
    return 'loading...';
  }
  return (
    <div>
      <section className="featured">
        {renderComponent(FEATURED_DICTIONARY, data.featured)}
      </section>
      <section className="sections">
        {data.sections.map(section =>
          renderComponent(SECTIONS_DICTIONARY, section)
        )}
      </section>
    </div>
  );
}
```

</CodeSurferLayout>
</Center>

---

<Center style={{ fontSize: '.7em'}}>

<h1 style={{ color: '#4be8ff' }}>The Hard Parts</h1>

## Fragmented Business logic

## Variance across platforms

## Pagination/Lazy Loading

</Center>

---

<Center style={{ fontSize: '.6em'}}>

<h1 style={{ color: '#0DE22B' }}>The Good Parts</h1>

## Simpler, presentational frontends

## Shared business logic

## Shared A/B Testing and Feature Flagging

## Design consistency via a ‚ÄúDesign Schema‚Äù

## Query optimization

</Center>

---

<Center>

# Think outside the box

</Center>

---

# Thanks! üëãüèª

## GitHub: [infiniteluke](http://github.com/infiniteluke/)

## Twitter: [lukeherrington](https://twitter.com/lukeherrington)

---

# Resources

<div style={{margin: '0 5%'}}>

- [These slides](https://github.com/infiniteluke/components-as-data-presentation)
- [React](http://reactjs.org)
- [SwiftUI](https://developer.apple.com/xcode/swiftui/)
- [Flutter](https://flutter.dev/docs/development/ui/widgets-intro)
- [Roy Fielding's REST Disertation](https://www.ics.uci.edu/~fielding/pubs/dissertation/fielding_dissertation_2up.pdf)

</div>

---

# Resources Continued

<div style={{margin: '0 5%'}}>

- [HATEOS](https://roy.gbiv.com/untangled/2008/rest-apis-must-be-hypertext-driven)
- [JSON:API](https://jsonapi.org)
- [CRDT](http://radlab.cs.berkeley.edu/people/fox/static/pubs/pdf/c18.pdf)
- [GraphQL](https://graphql.org)

</div>
